<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Fortune's algorithm visualization</title>

<link rel="stylesheet" type="text/css" href="css/jsxgraph.css" />
<script type="text/javascript" src="js/jsxgraphcore.js"></script>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</head>

<body>
<div class="container-fluid" style="margin-top:1%;margin-bottom:1%;">
<div class="row">
<div class="col-9">
	<div id="jxgbox" class="jxgbox" style="width:100%; height:0px; padding-bottom:100%"></div>
</div>
<div class="col-3">
    <button type="button" onClick="mp.moveTo([1,-9],6000)" class="btn btn-primary btn-lg btn-block">Run</button>
    <button type="button" class="btn btn-primary btn-lg btn-block">Next</button>
</div>
</div>
</div>
<script type="text/javascript">
 function drawRandomPoints(len, brd, attr, range){
	if(len <= 0) return;
	range = (typeof range !== 'undefined') ?  range :  [-10, 10, 10, -10];
	p = [];
	for (i=0;i<len;i++) 
		p[i] = brd.createElement('point',[Math.random() * (range[1] - range[0]) + range[0], Math.random() * (range[3] - range[2]) + range[2]],attr);
	return p;
 }
 
 function drawParabolas(p, brd){
	 p.forEach(function (value) {
	  	board.create('functiongraph', [function(x){return parabola(value, x);}],{dash:2});
	 }); 
	 brd.create('functiongraph', [function(x){
		 var minimum = Number.POSITIVE_INFINITY;
		 p.forEach(function (value) {
			if(parabola(value, x) < minimum) minimum = parabola(value, x);
		 }); 
		 return minimum;}]);
 }
 
 function parabola(p1, x) { //site, horizontal line and x coordinate
 	var y1 = p1.Y();
	var x1 = p1.X();
	var l = mp.Y();
	if(y1 > mp.Y())
	  return 1/(2*(y1 - l))*(Math.pow((x - x1),2) + Math.pow(y1, 2) - Math.pow(l, 2));
	else
	  return Number.POSITIVE_INFINITY;
 }
 
 function copy(k){return k;}
 
 var attr = {
		fillColor: "black",
		strokeColor: "black",
		withLabel: false
	};
 var board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-10, 10, 10, -10], axis:true});
 
// var li3 = board.create('line',[[-1,1],[1,-1]], {straightFirst:false, straightLast:false, strokeWidth:2});

 //initialize horizontal gdragable line
 var mp = board.create('point',[1,0],{name:"drag", withLabel: false, face:'o', size:8, strokeColor:'red', fillOpacity:0.6, strokeOpacity: 0.6});
 var horizontalLine = board.create('line',["drag",[20000,"Y(drag)"]], {straightFirst:true, straightLast:true, strokeWidth:2});
 
 drawParabolas(drawRandomPoints(10, board, attr), board);

</script>
<script type = "module" src="js/test.js"></script>
</body>
    
	<script src="js/point.js"></script>
	<script src="js/edge.js"></script>
</html>
